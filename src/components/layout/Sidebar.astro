---
const { path } = Astro;
const links = [
  { href: "/projects", label: "Projects", icon: "grid" },
  { href: "/board", label: "Board", icon: "kanban" },
  { href: "/sprints", label: "Sprints", icon: "activity" },
  { href: "/settings", label: "Settings", icon: "settings" },
];

const currentPath = new URL(Astro.request.url).pathname;
---

<aside
  class="fixed inset-y-0 left-0 z-50 w-64 bg-gradient-to-b from-[#9a8794] to-[#f5d7b3] shadow-xl text-white transition-transform duration-300 transform -translate-x-full md:translate-x-0"
  id="sidebar"
>
  <div class="h-20 flex items-center px-8 border-b border-white/10">
    <h1 class="text-2xl font-bold tracking-tight">FlowBoard</h1>
  </div>

  <nav class="p-4 space-y-2 mt-4">
    {
      links.map((link) => (
        <a
          href={link.href}
          class:list={[
            "flex items-center gap-3 px-4 py-3 rounded-2xl transition-all duration-200 group",
            currentPath.startsWith(link.href)
              ? "bg-white/20 font-semibold shadow-inner text-white"
              : "text-white/80 hover:bg-white/10 hover:text-white",
          ]}
        >
          <span class="w-5 h-5 opacity-80">
            {/* Simple SVG icon placeholders based on name */}
            {link.icon === "grid" && (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 01-2.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"
                />
              </svg>
            )}
            {link.icon === "kanban" && (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M9 4.5v15m6-15v15m-10.875 0h15.75c.621 0 1.125-.504 1.125-1.125V5.625c0-.621-.504-1.125-1.125-1.125H4.125C3.504 4.5 3 5.004 3 5.625v12.75c0 .621.504 1.125 1.125 1.125z"
                />
              </svg>
            )}
            {link.icon === "activity" && (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"
                />
              </svg>
            )}
            {link.icon === "settings" && (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 110-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.75.248.528.675.9.954 1.284a1.25 1.25 0 001.694.09l.365-.325c.168-.15.253-.377.253-.604 0-.153-.027-.306-.081-.453a8.96 8.96 0 01-.157-2.738A5.5 5.5 0 0113.5 10.5a5.5 5.5 0 013.904 4.496 8.965 8.965 0 01-.157 2.738c-.054.147-.081.3-.081.453 0 .227.085.454.253.604l.365.325a1.25 1.25 0 001.694-.09c.28-.385.706-.757.954-1.284.4-1.076.732-2.006.985-2.968m-11.168.218a5.505 5.505 0 01-3.904-4.496 8.965 8.965 0 01.157-2.738c.054-.147.081-.3.081-.453 0-.227-.085-.454-.253-.604l-.365-.325a1.25 1.25 0 00-1.694.09c-.28.385-.706.757-.954 1.284a8.956 8.956 0 00-.985 2.968"
                />
              </svg>
            )}
          </span>
          {link.label}
        </a>
      ))
    }
  </nav>

  <div class="absolute bottom-8 left-0 right-0 px-6">
    <div class="bg-white/10 rounded-xl p-4 backdrop-blur-sm">
      <p
        class="text-xs uppercase tracking-wider text-white/60 font-semibold mb-2"
      >
        My Team
      </p>
      <div class="flex items-center gap-2">
        <div
          class="w-8 h-8 rounded-full bg-peach-300 flex items-center justify-center text-peach-900 font-bold text-xs"
        >
          SP
        </div>
        <span class="text-sm font-medium">Space Partners</span>
      </div>
    </div>
  </div>
</aside>

<div
  class="fixed inset-0 bg-black/50 z-40 md:hidden hidden"
  id="sidebar-backdrop"
  onclick="document.getElementById('sidebar').classList.add('-translate-x-full'); this.classList.add('hidden')"
>
</div>
